ModAuthor       =   "Redmas"
LuaAuthor       =   "Hypn0tick"
ModName         =   "Visual_Changes-Dark_Space"
BaseDescription =   "Makes space colors look more realisticly dark."
GameVersion     =   "3.99"

DataTable =
{
    {
        ["COLOURS"] =
        {
            {"0.0049", "0.010737", "0.010737", "1", "0.0029", "0.010328", "0.010361", "1", "0.0025", "0.010707", "0.01", "1", "0.0124", "0.010337", "0.010337", "1", "0.0056", "0.01083", "0.01014", "1", "0.0033", "0.010196", "0.010267", "1", "0.00191", "0.010441", "0.010623", "1", "0.863", "0.010997", "0.01", "1", "0.906", "0.90695843", "0.9072", "1", "0.891", "0.80955774", "0.80983", "1", "0.226", "0.010549741", "0.010563", "1", "0.0025", "0.010707", "0.01", "1", "0.0025", "0.010707", "0.01", "1" },
            {"0.0025", "0.01", "0.010785", "1", "0.0011", "0.01078", "0.010187", "1", "0.0088", "0.010726", "0.01", "1", "0.0067", "0.010613", "0.010493", "1", "0.0011", "0.01078", "0.010187", "1", "0", "0.010217", "0.010417", "1", "0.0011", "0.010822", "0.01", "1", "0.892", "0.50892", "0.50977", "1", "0.906", "0.809492", "0.7072", "1", "0.291", "0.858454", "0.010983", "1", "0.226", "0.502347", "0.010563", "1", "0.0088", "0.010726", "0.01", "1", "0.0088", "0.010726", "0.01", "1" },
            {"0.00143", "0.010264", "0.01052", "1", "0.0059", "0.0103", "0.01011", "1", "0.0078", "0.010161", "0.0102", "1", "0.00143", "0.010264", "0.01052", "1", "0.0059", "0.0103", "0.01011", "1", "0.0078", "0.01161", "0.0102", "1", "0.00244", "0.80379", "0.80537", "1", "0.58", "0.836", "0.993", "1", "0.90106", "0.50388711", "0.2072", "1", "0.291", "0.609625", "0.983", "1", "0.226", "0.381168", "0.563", "1", "0.0031", "0.010665", "0.010963", "1", "0.0031", "0.010665", "0.010963", "1"},
            {"0.0008", "0.010597", "0.010385", "1", "0.0004", "0.01056", "0.010527", "1", "0.00236", "0.010524", "0.010563", "1", "0.0083", "0.010297", "0.01022", "1", "0.00116", "0.010243", "0.010236", "1", "0.00072", "0.010241", "0.010263", "1", "0.0013", "0.010597", "0.010503", "1", "0.888", "0.010917", "0.80853", "1", "0.906", "0.02", "0.621171", "1", "0.291", "0.983", "0.871616", "1", "0.226", "0.563", "0.508757", "1", "0.00236", "0.010524", "0.010563", "1", "0.00236", "0.010524", "0.010563", "1"},
            {"0.00223", "0.010284", "0.01031", "1", "0.00276", "0.010414", "0.01054", "1", "0.00149", "0.010274", "0.01041", "1", "0.00223", "0.010284", "0.01031", "1", "0.0017", "0.01012", "0.01013", "1", "0.00113", "0.010186", "0.010267", "1", "0.00283", "0.010479", "0.01057", "1", "0.694", "0.846", "0.01", "1", "0.006", "0.9525317", "0.672", "1", "0.291", "0.763585", "0.983", "1", "0.226", "0.456146", "0.563", "1", "0.0149", "0.01274", "0.0141", "1", "0.0149", "0.01274", "0.0141", "1"},
            {"0.01", "0.0126", "0.0129", "1", "0.0082", "0.01166", "0.0119", "1", "0.0051", "0.01099", "0.01137", "1", "0.01", "0.0126", "0.0129", "1", "0.0082", "0.01166", "0.0119", "1", "0.0051", "0.01099", "0.01137", "1", "0.0103", "0.01345", "0.01413", "1", "0.8803", "0.8988", "0.01", "1", "0.006", "0.585316", "0.92", "1", "0.891", "0.831206", "0.983", "1", "0.0226", "0.01489077", "0.01563", "1", "0.0051", "0.01099", "0.01137", "1", "0.0051", "0.01099", "0.01137", "1"},
            {"0.0143", "0.01264", "0.0152", "1", "0.0059", "0.0103", "0.0111", "1", "0.0078", "0.01161", "0.012", "1", "0.0143", "0.01264", "0.0152", "1", "0.0059", "0.0103", "0.0111", "1", "0.0078", "0.01161", "0.012", "1", "0.244", "0.379", "0.537", "1", "0.058", "0.01836", "0.8993", "1", "0.506", "0.588711", "0.52", "1", "0.291", "0.609625", "0.983", "1", "0.0226", "0.01381168", "0.01563", "1", "0.0031", "0.01665", "0.01963", "1", "0.0031", "0.01665", "0.01963", "1"},
            {"0.0063", "0.01298", "0.01597", "1", "0.0227", "0.01294", "0.01561", "1", "0.0158", "0.01248", "0.01427", "1", "0.0158", "0.01248", "0.01427", "1", "0.0105", "0.01156", "0.0136", "1", "0.0158", "0.01248", "0.01427", "1", "0.0128", "0.01438", "0.01597", "1", "0.0688", "0.8917", "0.01853", "1", "0.0106", "0.72", "0.821171", "1", "0.291", "0.983", "0.871616", "1", "0.226", "0.563", "0.508757", "1", "0.0236", "0.01524", "0.01563", "1", "0.0236", "0.01524", "0.01563", "1"},
            {"0.0223", "0.01284", "0.0131", "1", "0.0276", "0.01414", "0.0154", "1", "0.0149", "0.01274", "0.0141", "1", "0.0223", "0.01284", "0.0131", "1", "0.0019", "0.01089", "0.01153", "1", "0.0149", "0.01274", "0.0141", "1", "0.0031", "0.01329", "0.01467", "1", "0.8694", "0.01846", "0.01", "1", "0.606", "0.625317", "0.62", "1", "0.291", "0.763585", "0.983", "1", "0.226", "0.456146", "0.563", "1", "0.0149", "0.01274", "0.0141", "1", "0.0149", "0.01274", "0.0141", "1"},
            {"0.01", "0.0126", "0.0129", "1", "0.0082", "0.01166", "0.0119", "1", "0.0051", "0.01099", "0.01137", "1", "0.01", "0.0126", "0.0129", "1", "0.0082", "0.01166", "0.0119", "1", "0.0051", "0.01099", "0.01137", "1", "0.0208", "0.01212", "0.01413", "1", "0.8803", "0.8988", "0.8", "1", "0.0106", "0.585316", "0.72", "1", "0.291", "0.831206", "0.983", "1", "0.226", "0.489077", "0.563", "1", "0.0051", "0.01099", "0.01137", "1", "0.0051", "0.01099", "0.01137", "1"},
        }
    },
}

NMS_MOD_DEFINITION_CONTAINER = 
{
["MOD_FILENAME"]    = "_"..ModAuthor.."_"..ModName..".pak",
["MOD_DESCRIPTION"] = BaseDescription,
["MOD_AUTHOR"]      = ModAuthor,
["LUA_AUTHOR"]      = LuaAuthor,
["NMS_VERSION"]     = GameVersion,
["MODIFICATIONS"]   =
    {
        {
            ["MBIN_CHANGE_TABLE"] =
            {
            }
        }
    }
}


function GetColours(R1,G1,B1,A1,R2,G2,B2,A2,R3,G3,B3,A3,R4,G4,B4,A4,R5,G5,B5,A5,R6,G6,B6,A6,R7,G7,B7,A7,R8,G8,B8,A8,R9,G9,B9,A9,R10,G10,B10,A10,R11,G11,B11,A11,R12,G12,B12,A12,R13,G13,B13,A13)
    return
[[
    <Property value="GcSolarSystemSkyColourData.xml">
      <Property name="TopColour" value="Colour.xml">
        <Property name="R" value="]].. R1 ..[[" />
        <Property name="G" value="]].. G1 ..[[" />
        <Property name="B" value="]].. B1 ..[[" />
        <Property name="A" value="]].. A1 ..[[" />
      </Property>
      <Property name="MidColour" value="Colour.xml">
        <Property name="R" value="]].. R2 ..[[" />
        <Property name="G" value="]].. G2 ..[[" />
        <Property name="B" value="]].. B2 ..[[" />
        <Property name="A" value="]].. A2 ..[[" />
      </Property>
      <Property name="BottomColour" value="Colour.xml">
        <Property name="R" value="]].. R3 ..[[" />
        <Property name="G" value="]].. G3 ..[[" />
        <Property name="B" value="]].. B3 ..[[" />
        <Property name="A" value="]].. A3 ..[[" />
      </Property>
      <Property name="TopColourPlanet" value="Colour.xml">
        <Property name="R" value="]].. R4 ..[[" />
        <Property name="G" value="]].. G4 ..[[" />
        <Property name="B" value="]].. B4 ..[[" />
        <Property name="A" value="]].. A4 ..[[" />
      </Property>
      <Property name="MidColourPlanet" value="Colour.xml">
        <Property name="R" value="]].. R5 ..[[" />
        <Property name="G" value="]].. G5 ..[[" />
        <Property name="B" value="]].. B5 ..[[" />
        <Property name="A" value="]].. A5 ..[[" />
      </Property>
      <Property name="BottomColourPlanet" value="Colour.xml">
        <Property name="R" value="]].. R6 ..[[" />
        <Property name="G" value="]].. G6 ..[[" />
        <Property name="B" value="]].. B6 ..[[" />
        <Property name="A" value="]].. A6 ..[[" />
      </Property>
      <Property name="CloudColour" value="Colour.xml">
        <Property name="R" value="]].. R7 ..[[" />
        <Property name="G" value="]].. G7 ..[[" />
        <Property name="B" value="]].. B7 ..[[" />
        <Property name="A" value="]].. A7 ..[[" />
      </Property>
      <Property name="LightColour" value="Colour.xml">
        <Property name="R" value="]].. R8 ..[[" />
        <Property name="G" value="]].. G8 ..[[" />
        <Property name="B" value="]].. B8 ..[[" />
        <Property name="A" value="]].. A8 ..[[" />
      </Property>
      <Property name="NebulaColour1" value="Colour.xml">
        <Property name="R" value="]].. R9 ..[[" />
        <Property name="G" value="]].. G9 ..[[" />
        <Property name="B" value="]].. B9 ..[[" />
        <Property name="A" value="]].. A9 ..[[" />
      </Property>
      <Property name="NebulaColour2" value="Colour.xml">
        <Property name="R" value="]].. R10 ..[[" />
        <Property name="G" value="]].. G10 ..[[" />
        <Property name="B" value="]].. B10 ..[[" />
        <Property name="A" value="]].. A10 ..[[" />
      </Property>
      <Property name="NebulaColour3" value="Colour.xml">
        <Property name="R" value="]].. R11 ..[[" />
        <Property name="G" value="]].. G11 ..[[" />
        <Property name="B" value="]].. B11 ..[[" />
        <Property name="A" value="]].. A11 ..[[" />
      </Property>
      <Property name="FogColour" value="Colour.xml">
        <Property name="R" value="]].. R12 ..[[" />
        <Property name="G" value="]].. G12 ..[[" />
        <Property name="B" value="]].. B12 ..[[" />
        <Property name="A" value="]].. A12 ..[[" />
      </Property>
      <Property name="FogColour2" value="Colour.xml">
        <Property name="R" value="]].. R13 ..[[" />
        <Property name="G" value="]].. G13 ..[[" />
        <Property name="B" value="]].. B13 ..[[" />
        <Property name="A" value="]].. A13 ..[[" />
      </Property>
    </Property>
]]
end

function CreateColoursProperty(PaletteColours)
    local PropertiesString = ""

    for j = 1, #PaletteColours do
        local R1 = PaletteColours[j][1 ]
        local G1 = PaletteColours[j][2 ]
        local B1 = PaletteColours[j][3 ]
        local A1 = PaletteColours[j][4 ]
        local R2 = PaletteColours[j][5 ]
        local G2 = PaletteColours[j][6 ]
        local B2 = PaletteColours[j][7 ]
        local A2 = PaletteColours[j][8 ]
        local R3 = PaletteColours[j][9 ]
        local G3 = PaletteColours[j][10]
        local B3 = PaletteColours[j][11]
        local A3 = PaletteColours[j][12]
        local R4 = PaletteColours[j][13]
        local G4 = PaletteColours[j][14]
        local B4 = PaletteColours[j][15]
        local A4 = PaletteColours[j][16]
        local R5 = PaletteColours[j][17]
        local G5 = PaletteColours[j][18]
        local B5 = PaletteColours[j][19]
        local A5 = PaletteColours[j][20]
        local R6 = PaletteColours[j][21]
        local G6 = PaletteColours[j][22]
        local B6 = PaletteColours[j][23]
        local A6 = PaletteColours[j][24]
        local R7 = PaletteColours[j][25]
        local G7 = PaletteColours[j][26]
        local B7 = PaletteColours[j][27]
        local A7 = PaletteColours[j][28]
        local R8 = PaletteColours[j][29]
        local G8 = PaletteColours[j][30]
        local B8 = PaletteColours[j][31]
        local A8 = PaletteColours[j][32]        
        local R9 = PaletteColours[j][33]
        local G9 = PaletteColours[j][34]
        local B9 = PaletteColours[j][35]
        local A9 = PaletteColours[j][36]
        local R10 = PaletteColours[j][37]
        local G10 = PaletteColours[j][38]
        local B10 = PaletteColours[j][39]
        local A10 = PaletteColours[j][40]
        local R11 = PaletteColours[j][41]
        local G11 = PaletteColours[j][42]
        local B11 = PaletteColours[j][43]
        local A11 = PaletteColours[j][44]
        local R12 = PaletteColours[j][45]
        local G12 = PaletteColours[j][46]
        local B12 = PaletteColours[j][47]
        local A12 = PaletteColours[j][48]   
        local R13 = PaletteColours[j][49]
        local G13 = PaletteColours[j][50]
        local B13 = PaletteColours[j][51]
        local A13 = PaletteColours[j][52]           
        PropertiesString = PropertiesString..GetColours(R1, G1, B1, A1, R2, G2, B2, A2, R3, G3, B3, A3, R4, G4, B4, A4, R5, G5, B5, A5, R6, G6, B6, A6, R7, G7, B7, A7, R8, G8, B8, A8, R9, G9, B9, A9, R10, G10, B10, A10, R11, G11, B11, A11, R12, G12, B12, A12, R13, G13, B13, A13)
    end
return PropertiesString
end

local BaseColourPalettesTable  = NMS_MOD_DEFINITION_CONTAINER["MODIFICATIONS"][1]["MBIN_CHANGE_TABLE"]
for i = 1, #DataTable do
    local PaletteColours = DataTable[i]["COLOURS"]

    BaseColourPalettesTable[#BaseColourPalettesTable +1 ] =
    {
        ["MBIN_FILE_SOURCE"] = 
        { 
            [[METADATA\SIMULATION\SOLARSYSTEM\WEATHER\SKYSETTINGS\SPACERARESKYCOLOURS.MBIN]],               
        },      
        ["EXML_CHANGE_TABLE"] =
        {
            {
                ["PRECEDING_KEY_WORDS"] = { "Settings" },
                ["ADD"] = CreateColoursProperty(PaletteColours)
            },
            {
                ["SPECIAL_KEY_WORDS"] = {"TopColour","Colour.xml"},
                ["REPLACE_TYPE"]    = "ALLFOLLOWING",
                ["SECTION_ACTIVE"]  =   {11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58},
                ["SECTION_UP"]  =   1,
                ["REMOVE"]  =   "Section"
            },
        }
    }
    BaseColourPalettesTable[#BaseColourPalettesTable +1 ] =
    {
        ["MBIN_FILE_SOURCE"] = 
        { 
            [[METADATA\SIMULATION\SOLARSYSTEM\WEATHER\SKYSETTINGS\SPACESKYCOLOURS.MBIN]],
        },
        ["EXML_CHANGE_TABLE"] =
        {
            {
                ["PRECEDING_KEY_WORDS"] = { "Settings" },
                ["ADD"] = CreateColoursProperty(PaletteColours)
            },
            {
                ["SPECIAL_KEY_WORDS"] = {"TopColour","Colour.xml"},
                ["REPLACE_TYPE"]    = "ALLFOLLOWING",
                ["SECTION_ACTIVE"]  =   {11,12,13,14,15,16,17,18,19,20},
                ["SECTION_UP"]  =   1,
                ["REMOVE"]  =   "Section"
            },
            {
                ["SPECIAL_KEY_WORDS"] = {"NebulaColour1","Colour.xml"},
                ["SECTION_ACTIVE"]  =   {1},
                ["VALUE_CHANGE_TABLE"]  =
                {
                    {"G",   "0.9069584"}
                }
            },
            {
                ["SPECIAL_KEY_WORDS"] = {"NebulaColour2","Colour.xml"},
                ["SECTION_ACTIVE"]  =   {1},
                ["VALUE_CHANGE_TABLE"]  =
                {
                    {"G",   "0.809557736"}
                }
            },
            {
                ["SPECIAL_KEY_WORDS"] = {"NebulaColour3","Colour.xml"},
                ["SECTION_ACTIVE"]  =   {1},
                ["VALUE_CHANGE_TABLE"]  =
                {
                    {"G",   "0.0105497412"}
                }
            },
            {
                ["SPECIAL_KEY_WORDS"] = {"NebulaColour1","Colour.xml"},
                ["SECTION_ACTIVE"]  =   {3},
                ["VALUE_CHANGE_TABLE"]  =
                {
                    {"G",   "0.5038871"}
                }
            },
        }
    }
end
